# 람다보다는 메서드 참조를 사용하라

람다는 익명함수보다 간결하지만, **메서드 참조를 사용하면 함수 객체를 람다보다도 더 간결하게 표현**할 수 있다.

<br>



### 람다와 메서드 참조 비교

* 임의의 키와 `Integer` 값의 매핑을 관리하는 프로그램

  ```java
  // 람다 사용
  map.merge(key, 1, (count, incr) -> count + incr);
  ```

  * `merge` 메서드는 키, 값, 함수를 인수로 받고, 주어진 키가 맵 안에 없다면 {키, 값} 쌍을 그대로 저장하고, 키가 있다면 함수를 현재 값과 주어진 값에 적용한 다음, 그 결과로 현재 값을 덮어쓴다.
  * 람다를 사용했을 때, `count`와 `incr`은 크게 역할이 없지만, 공간을 차지하게 한다.
  * 람다 대신 메서드 참조를 전달하면 똑같은 결과를 더 보기 좋게 나타낼 수 있다.

  ```java
  // 메서드 참조 사용
  map.merge(key, 1, Integer::sum);
  ```

  * 매개변수 수가 늘어날수록 메서드 참조로 제거할 수 있는 코드 양도 많아진다.

* **람다의 사용**

  * 무조건 메서드 참조가 람다보다 나은 것은 아니다.
  * 람다에서는 매개변수의 이름 자체가 프로그래머에게 좋은 가이드가 되기도 한다.
  * 메서드와 람다가 같은 클래스에 있을 때는 메서드 참조보다 람다를 사용하는 편이 코드도 짧고 명확하다.

* **메서드 참조의 사용**

  * 람다로 구현했을 때, 너무 길거나 복잡하다면 메서드 참조가 좋은 대안이 된다.
  * 메서드 참조에는 기능을 잘 드러내는 이름을 지어줄 수 있고, 설명을 문서화하여 남길 수 있다.

<br>

## 메서드 참조 유형

* **정적 메서드를 가리키는 메서드 참조**
* **인스턴스 메서드를 참조하는 유형**
  * 수신 객체(참조 대상 인스턴스)를 특정하는 **한정적 인스턴스 메서드 참조**
    * 정적 참조와 비슷하다.
    * 함수 객체가 받는 인수와 참조되는 메서드가 받는 인수가 똑같다.
  * 수신 객체를 특정하지 않는 **비한정적 인스턴스 메서드 참조**
    * 함수 객체를 적용하는 시점에 수신 객체를 알려준다.
    * 수신 객체 전달용 매개변수가 매개변수 목록의 첫 번째로 추가되며, 그 뒤로는 참조되는 메서드 선언에 정의된 매개변수들이 뒤따른다.
    * 주로 스트림 파이프라인에서의 매핑과 필터 함수에서 사용된다.
* **클래스 생성자를 가리키는 메서드 참조**
* **배열 생성자를 가리키는 메서드 참조**

| 메서드 참조 유형    | 예                        | 같은 기능을 하는 람다                                       |
| ------------------- | ------------------------- | ----------------------------------------------------------- |
| 정적                | `Integer::parseInt`       | `str -> Integer.parseInt(str)`                              |
| 한정적 (인스턴스)   | `Instance.now()::isAfter` | `Instant then = Instant.now();`<br />`t -> then.isAfter(t)` |
| 비한정적 (인스턴스) | `String::toLowerCase`     | `str -> str.toLowerCase()`                                  |
| 클래스 생성자       | `TreeMap<K, V>::new`      | `() -> new TreeMap<K, V>()`                                 |
| 배열 생성자         | `int[]::new`              | `len -> new int[len]`                                       |



<br>

### 정리

* **메서드 참조 쪽이 짧고 명확하다면 메서드 참조**를 쓰고, **그렇지 않을 때만 람다를 사용**하자.