# 불필요한 객체 생성을 피하라

### 객체 재사용

* 똑같은 기능의 객체를 매번 생성하기보다 객체 하나를 재사용하는 것이 나을 때가 많다.
  * `String s = new String("bikini")`
    * 해당 문장이 실행될 때마다 `String` 인스턴스가 새로 생성된다.
  * `String s = "bikini"`
    * 하나의 `String` 인스턴스를 사용하며, 같은 가상 머신 안에서 동일한 문자열 리터럴을 사용하는 모든 코드가 같은 객체를 재사용함이 보장된다.
* 생성 비용이 비싼 객체일 경우 캐싱하여 재사용하는 것이 권장된다.

<br>



### 불필요한 객체 생성

* 불변 클래스는 정적 팩터리 메서드를 사용해 불필요한 객체 생성을 피할 수 있다.
* Auto boxing
  ```java
  private static long sum() {
      Long sum = 0L;
      for(int i = 0; i <= Integer.MAX_VALUAE; i++)
          sum += i;
      return sum;
  }
  ```
  * sum 변수를 Long으로 선언해서, long타입인 i가 sum에 더해질 때마다 오토박싱이 수행된다.
* 박싱된 기본 타입보다는 기본 타입을 사용하고, 의도치 않은 오토박싱이 숨어있지 않도록 하자!

<br>

### 정리

* 하지만, "객체 생성은 비싸니 피해야 된다" 라고 오해하면 안된다!
  * 프로그램의 명확성, 간결성, 기능을 위해서 객체를 추가해야되면, 객체 생성을 하는게 좋을 수 있음
* 단순히 객체 생성을 피하고자, pool 객체를 만들지 말자.
  * 데이터베이스 연결 같은 경우 poll 객체를 통해 재사용하는 것이 낫지만, 일반적으로 자체 객체 풀은 메모리 사용량을 늘리고 코드 가시성, 성능을 떨어트린다.
* 방어적 복사가 필요한 상황에서는 객체를 재사용했을 때, 필요 없는 객체를 반복 생성할 때보다 더 큰 피해를 가져올 수 있다.
* 상황에 따라서 어떻게 할 지 신중히 고민할 것!