# `finalizer`와 `cleaner` 사용을 피해라

### 자바의 객체 소멸자

자바는 두 가지 객체 소멸자를 제공한다.

* **`finalizer`**
  * 예측할 수 없고, 상황에 따라 위험할 수 있어 일반적으로 불필요하다.
* **`cleaner`**
  * `finalizer`보다 덜 위험하지만, 예측할 수 없고, 느리고, 일반적으로 불필요하다.

<br>



### `finalizer`과 `cleaner`의 대체

* `AutoCloseable`을 구현하고, 객체를 다 쓰고나서 `close` 메서드를 호출한다.
* 일반적으로 예외가 발생해도 제대로 종료되도록 `try-with-resource`를 사용해야 한다.
* `close` 메서드에서 객체가 더 이상 유효하지 않음을 필드에 기록하고, 다른 메서드에서 이 필드를 검사해서 객체가 닫힌 후에 불렸다면 IllegalStateException을 던지는 방법이 있다.

<br>

 

### 정리

* `cleaner`는 안정망 역할이나, 중요하지 않은 네이티브 자원 회수용으로만 사용하자! (불확실성과 성능 저하에 주의)